function shortName=getShortFileName(fileName){
shortName=strsplit(as.character(imageName),"/"))[[1]][8]
}
shortName <- function(fileName){
out=strsplit(as.character(imageName),"/"))[[1]][8]
}
shortName <- function(fileName){
out=strsplit(as.character(fileName),"/")[[1]][8]
}
shortName(d.raw$imageName[1])
shortName
test=shortName(d.raw$imageName[1])
test
shortFileName <- function(fileName){
out=strsplit(as.character(fileName),"/")[[1]][8]
}
d.test <- d.raw %>%
data.frame %>%
mutate(imageNameShort = shortFileName(imageName))
d.test
d.test$imageNameShort
fileName
d.raw
d.raw$imageName
d.raw$imageName[1]
d.raw$imageName[2]
d.raw$imageName[3]
d.raw$imageName[4]
as.character(d.raw$imageName[4])
strsplit(as.character(d.raw$imageName[4]))
strsplit(as.character(d.raw$imageName[4]),"/")
strsplit(as.character(d.raw$imageName[4]),"/")[8]
strsplit(as.character(d.raw$imageName[4]),"/")[[1]]
strsplit(as.character(d.raw$imageName[4]),"/")[[1]][8]
d.raw$imageName
strsplit(d.raw$imageName,"/")
strsplit(d.raw$imageName[1],"/")
shortFileName <- function(fileName){
out=strsplit(as.character(fileName),"/")[[1]][8]
}
d.test <- d.raw %>%
data.frame %>%
mutate(imageNameShort = shortFileName(imageName))
d.raw
d.test$imageNameShort
d.raw$imageName
d.raw$imageName[1]
as.character(d.raw$imageName[1])
shortFileName(as.character(d.raw$imageName[1]))
out=shortFileName(as.character(d.raw$imageName[1]))
out
out=shortFileName(as.character(d.raw$imageName[2]))
out
d.test <- d.raw %>%
mutate(imageNameShort = shortFileName(imageName))
d.test
d.tes$
rm(list=ls())
knitr::opts_chunk$set(fig.width=8, fig.height=5,
echo=TRUE, warning=FALSE, message=FALSE, cache=TRUE)
suppressPackageStartupMessages(c("dplyr","langcog","tidyr","ggplot2","lme4"))
#library(langcog)
library(dplyr)
library(ggplot2)
library(rjson)
library(stringr)
library(tidyr)
theme_set(theme_bw())
files <- dir("../production-results/")
d.raw <- data.frame()
for (f in files) {
jf <- paste("../production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- data.frame(workerid = jd$WorkerId,
rating = as.numeric(jd$answers$data$rating),
childsAge = jd$answers$data$childsAge,
imageName = jd$answers$data$imageName)
d.raw <- bind_rows(d.raw, id)
}
shortFileName <- function(fileName){
out=strsplit(as.character(fileName),"/")[[1]][8]
}
d.test <- d.raw %>%
mutate(imageNameShort = shortFileName(imageName))
d.test
d.test <- d.raw %>%
group_by(imageName) %>%
mutate(imageNameShort = shortFileName(imageName))
d.test <- d.raw %>%
group_by(imageName) %>%
mutate(imageNameShort = shortFileName(imageName))
d.test
d.test$imageNameShort
p <- ggplot(d.raw, aes(factor(imageNameShort), rating))
p + geom_violin()
p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
d.pretty <- d.raw %>%
group_by(imageName) %>%
mutate(imageNameShort = shortFileName(imageName))
#numTrials=dim(d.raw)[1];
#for (r in 1:numTrials){
#  d.raw$imageNameShort=strsplit(as.character(d.raw$imageName[r]),"/")[[1]][8]
#}
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p + geom_violin()
p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
d.pretty
d.pretty$rating
d.pretty$imageNameShort
d.pretty$imageNa
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p + geom_violin()
p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
9*12
9*12
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p
p + geom_violin()
p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p + geom_violin()
d.pretty
d.pretty$childsAge
d.pretty$childsAge
d.pretty$childsAge[1]
as.character(d.pretty$childsAge[1])
as.character(d.pretty$childsAge)
as.character(d.pretty$childsAge[1])
as.character(d.pretty$childsAge[1])[1:2]
as.character(d.pretty$childsAge[1])
as.character(d.pretty$childsAge[1])(1:2)
as.character(d.pretty$childsAge[1])(1:2)
substr(as.character(d.pretty$childsAge[1]),1,2)
substr((d.pretty$childsAge[1]),1,2)
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge),1,2)
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))
)
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))
d.pretty
d.pretty$ageShort
d.pretty$ageShort != 24
d.pretty$ageShort != 24 | d.pretty$ageShort != NA
d.pretty$ageShort != 24 | d.pretty$ageShort !=i NA
is.nan(d.pretty$ageShort)
is.na.numeric_version(d.pretty$ageShort)
is.na(d.pretty$ageShort)
is.na(d.pretty$ageShort)
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))
filter(ageShort != 24 & is.na == FALSE)
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))  %>%
filter(ageShort != 24 & is.na == FALSE)
d.pretty
d.pretty$ageShort
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))  %>%
filter(ageShort != 24)
d.pretty
d.pretty$
d.pretty <- d.pretty %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))  %>%
filter(ageShort != 24)  %>%  #exclude older than 2 years
filter(is.na(ageShort) == FALSE) % #exclude less than 1 year
is.na(d.pretty$ageShort)
(d.pretty$ageShort)
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p <- ggplot(d.pretty, aes(factor(imageNameShort), rating))
p + geom_violin()
knitr::opts_chunk$set(echo = TRUE)
files <- dir("../production-results/")
d.raw <- data.frame()
for (f in files) {
jf <- paste("../production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- data.frame(workerid = jd$WorkerId,
rating = as.numeric(jd$answers$data$rating),
childsAge = jd$answers$data$childsAge,
imageName = jd$answers$data$imageName)
d.raw <- bind_rows(d.raw, id)
}
suppressPackageStartupMessages(c("dplyr","langcog","tidyr","ggplot2","lme4"))
library(dplyr)
library(ggplot2)
library(rjson)
library(stringr)
library(tidyr)
files <- dir("../production-results/")
d.raw <- data.frame()
for (f in files) {
jf <- paste("../production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- data.frame(workerid = jd$WorkerId,
rating = as.numeric(jd$answers$data$rating),
childsAge = jd$answers$data$childsAge,
imageName = jd$answers$data$imageName)
d.raw <- bind_rows(d.raw, id)
}
# function for shorter filename extraction
shortFileName <- function(fileName){
out=strsplit(as.character(fileName),"/")[[1]][8]
}
# make shorter iamge names for plots, etc.
d.raw <- d.raw %>%
group_by(imageName) %>%
mutate(imageNameShort = shortFileName(imageName))
d.raw
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
# show box plots for each object
p <- ggplot(d.subset) +
aes(factor(imageNameShort), rating)
# show box plots for each object
p <- ggplot(d.pretty) +
aes(factor(imageNameShort), rating)
p + geom_boxplot()
#
# show box plots for each object
p <- ggplot(d.pretty) +
aes(factor(imageNameShort), rating)
p + geom_boxplot() +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
d.pretty$rating
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating))  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
library(purrr)
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating))  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
suppressPackageStartupMessages(c("dplyr","langcog","tidyr","ggplot2","lme4"))
library(dplyr)
library(ggplot2)
library(rjson)
library(stringr)
library(tidyr)
library(dplyr)
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating))  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
suppressPackageStartupMessages(c("dplyr","langcog","tidyr","ggplot2","lme4"))
library(dplyr)
library(ggplot2)
library(rjson)
library(stringr)
library(tidyr)
library(dplyr)
library(tidyr)
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating))  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
suppressPackageStartupMessages(c("dplyr","langcog","tidyr","ggplot2","lme4"))
library(dplyr)
library(ggplot2)
library(rjson)
library(stringr)
library(tidyr)
library(dplyr)
library(forcats)
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating))  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
# show box plots for each object
p <- ggplot(d.pretty) +
aes(factor(imageNameShort), rating)
p + geom_boxplot() +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
library(langcog)
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, meanId))
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
d.pretty
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating)) %>%
multi_boot_standard(col = "meanId")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
d.pretty
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort, workerid) %>%
mutate(meanId = mean(rating)) %>%
multi_boot_standard(col = "meanId")
d.pretty
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort) %>%
mutate(meanId = mean(rating)) %>%
multi_boot_standard(col = "meanId")  %>%
ungroup  %>%
# mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort) %>%
mutate(meanId = mean(rating)) %>%
multi_boot_standard(col = "meanId")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
d.pretty
# show box plots for each object
p <- ggplot(d.pretty) + aes(factor(imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
p <- ggplot(d.pretty) + aes(factor(imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
# show box plots for each object
p <- ggplot(d.pretty) + aes(factor(imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
d.pretty
# show box plots for each object
p <- ggplot(d.pretty) + aes(factor(imageNameShort), mean) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
# show box plots for each object
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
d.prett
d.pretty
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# show box plots for each object
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
d.pretty
d.raw
d.raw$childsAge
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2)))
d.pretty$ageShort
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
filter(ageShort < 24)  %>%
group_by(imageNameShort) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# show box plots for each object
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
(d.pretty
d.pretty
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
filter(ageShort < 24)
d.pretty
d.pretty$ageShort
d.pretty$workerid
unique(d.pretty$workerid)
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort)
d.pretty
# pre-process: get children's age and filter by too young/old
d.pretty <- d.raw %>%
group_by(childsAge) %>%
mutate(ageShort = as.numeric(substr(childsAge,1,2))) %>%
filter(ageShort > 9)  %>%
group_by(imageNameShort) %>%
multi_boot_standard(col = "rating")  %>%
ungroup  %>%
mutate(imageNameShort = fct_reorder(imageNameShort, mean))
# toInclude=c('stapler.jpg','holepunch.jpg','walkman.jpg','bikebell.jpg')
# d.subset <- d.pretty %>%
#   group_by(workerid, imageNameShort) %>%
#   filter(is.element(imageNameShort,toInclude))
# show box plots for each object
ggplot(d.pretty, aes(x = factor(imageNameShort), y = mean, col = imageNameShort)) +
geom_pointrange(aes(ymin = ci_lower, ymax = ci_upper)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1))
#
setwd("~/Dropbox (Personal)/Projects-Stanford/labelconcept/Stimuli/1-OctPilot/0-StimGen/StimFamRatings/FamRatings/famRatings_v3/analysis")
files <- dir("../production-results/")
files
